---
layout: default
title: Benchmarks
disqus: yes
sitemap:
  lastmod: 2014-03-11
  priority: 0.9
  changefreq: monthly
---

<h1 id="benchmark" class="page-header">{{ page.title }}</h1>

<p class="lead">
  This page summarizes how much time is required to solve different
  optimization problems. Various solvers are used to compare the
  efficiency of the different available approaches.
</p>


<div class="bs-callout bs-callout-info">
  <h4>Methodology</h4>
  <ol>
    <li>Run the RobOptim test suite for each solver, the
      Hock-Schittkowski Collection problems are included, see
      the <a href="https://github.com/roboptim/roboptim-shared-tests">roboptim-shared-tests</a>
      repository to see the actual implementation. The "b" versions
      correspond to minor variations of a same problem but using the
      RobOptim in a different manner.
    </li>

    <li>Convert the RobOptim log files, i.e. <code>journal.log</code>, to a
      YAML file using
      <a href="https://github.com/roboptim/roboptim-analysis/blob/master/src/roboptim/analysis/log_to_yaml.py">log_to_yaml.py</a>.</li>
    <li>Tests for which solvers are failing are finally removed from
      the dataset (manually for now).</li>
  </ol>

  <p>The log file timing information are generated
    using <a href="http://www.boost.org/doc/libs/1_55_0/doc/html/date_time/posix_time.html">Boost.DateTime</a>.
  </p>

  <p>The tests provided here are too small to test sparse solvers in
    a robust way. Values for these solvers should be handled with
    great care!</p>

  <p><a href="http://www.ai7.uni-bayreuth.de/test_problem_coll.pdf">The
  document defining all the problems is available here.</a></p>

</div>

<div id="benchmark_schittkowski_dl"></div>
<div id="benchmark_schittkowski" style="width: 100%; height: 300em"></div>

<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  var benchmark = {};
  {% for test in site.data.benchmark %}
  if (!benchmark["{{test.testsuite}}"]) {benchmark["{{test.testsuite}}"] = {};}
  if (!benchmark["{{test.testsuite}}"]["{{test.problem}}"]) {benchmark["{{test.testsuite}}"]["{{test.problem}}"] = {};}
  benchmark["{{test.testsuite}}"]["{{test.problem}}"]["{{test.solver}}"] = "{{test.time}}";
  {% endfor %}

  benchmark["schittkowski"]["problem-15"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-16"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-20"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-25"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-28"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-33"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-40"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-47"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-48"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-49"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-50"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-51"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-52"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-53"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-55"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-56"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-61"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-63"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-66"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-72"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-76"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-78"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-79"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-80"]["cfsqp"] = null;
  benchmark["schittkowski"]["problem-81"]["cfsqp"] = null;

  benchmark["schittkowski"]["problem-13"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-16"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-20"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-25"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-28"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-44"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-55"]["ipopt"] = null;
  benchmark["schittkowski"]["problem-56"]["ipopt"] = null;

  benchmark["schittkowski"]["problem-13"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-16"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-20"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-25"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-28"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-44"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-55"]["ipopt-sparse"] = null;
  benchmark["schittkowski"]["problem-56"]["ipopt-sparse"] = null;


  benchmark["schittkowski"]["problem-2"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-8"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-13"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-14"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-16"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-20"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-23"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-25"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-28"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-33"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-47"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-55"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-56"]["nag-nlp"] = null;
  benchmark["schittkowski"]["problem-72"]["nag-nlp"] = null;

  benchmark["schittkowski"]["problem-2"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-8"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-13"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-14"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-16"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-20"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-23"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-24"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-25"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-28"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-33"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-44"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-47"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-55"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-56"]["nag-nlp-sparse"] = null;
  benchmark["schittkowski"]["problem-72"]["nag-nlp-sparse"] = null;

  var nlopt_fail = ["2", "8", "9", "12", "16", "19", "20", "25", "26", "28",
                    "33", "34", "36", "43", "44", "47", "49", "51", "55",
                    "56", "65", "81"]
  for (var i = 0, tot = nlopt_fail.length; i < tot; i++) {
      benchmark["schittkowski"]["problem-".concat(nlopt_fail[i])]["nlopt"] = null;
  }

  var pagmo_fail = ["6", "7", "10", "13", "15", "24", "26", "27", "31", "39",
                    "40", "47", "55", "56", "60", "61", "63", "71", "78", "79",
                    "80", "81", "71b"]
  for (var i = 0, tot = pagmo_fail.length; i < tot; i++) {
      benchmark["schittkowski"]["problem-".concat(pagmo_fail[i])]["pagmo"] = null;
  }

  var solverPrettyNames = {
  "cfsqp": "CFSQP",
  "ipopt": "IPOPT",
  "ipopt-sparse": "IPOPT (sparse)",
  "nag-nlp": "NAG",
  "nag-nlp-sparse": "NAG (sparse)",
  "nlopt": "NLopt (alpha)",
  "pagmo": "PaGMO (alpha)"
  };

  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart()
  {
    var data = new google.visualization.DataTable();

    data.addColumn('string', 'Solver');
    for (var problem in benchmark["schittkowski"]) {
    for (var solver in benchmark["schittkowski"][problem]) {
    data.addColumn('number',
    solverPrettyNames[solver] ? solverPrettyNames[solver] : solver);
    }
    break;
    }

    for (var problem in benchmark["schittkowski"]) {
    var pbName = problem.replace('problem-', '');
    pbName = ('000000' + pbName);
    pbName = pbName.substr(pbName.length - 3);
    var value = [pbName,];
    for (var solver in benchmark["schittkowski"][problem]) {
    value.push(parseFloat(
    benchmark["schittkowski"][problem][solver] ?
    benchmark["schittkowski"][problem][solver] :
    null));
    }
    // TODO: Compute this value automatically
    value.length = 8;
    data.addRow(value);
    }

    data.sort([{column: 0}]);

    // Used for solver selection
    var columns = [];
    var series = {};
    for (var i = 0; i < data.getNumberOfColumns(); i++) {
        columns.push(i);
        if (i > 0) {
            series[i - 1] = {};
        }
    }

    var options = {
    title: 'Hock-Schittkowski Collection Test Suite',
    hAxis: {title: 'Time (seconds)'},
    vAxis: {title: 'Problem Id'},
    series: series
    };

    var chart = new google.visualization.BarChart(document.getElementById('benchmark_schittkowski'));
    google.visualization.events.addListener(chart, 'ready', function () {
      $("#benchmark_schittkowski_dl").html(
      '<button type="button" class="btn btn-primary" id="benchmark_schittkowski_dl_btn"><span class="glyphicon glyphicon-download"></span> Download graph</button>');
      $("#benchmark_schittkowski_dl_btn").click(function(){
        window.location.href=chart.getImageURI();
      });
    });

    chart.draw(data, options);

    // Add listener to select/unselect solvers
    // See: http://stackoverflow.com/q/17444586/1043187
    google.visualization.events.addListener(chart, 'select', function ()
    {
      var sel = chart.getSelection();
      // if selection length is 0, we deselected an element
      if (sel.length > 0)
      {
          // if row is undefined, we clicked on the legend
          if (sel[0].row == null)
          {
              var col = sel[0].column;
              if (columns[col] == col)
              {
                  // hide the data series
                  columns[col] =
                  {
                      label: data.getColumnLabel(col),
                      type: data.getColumnType(col),
                      calc: function ()
                      {
                          return null;
                      }
                  };

                  // grey out the legend entry
                  series[col - 1].color = '#CCCCCC';
              }
              else
              {
                  // show the data series
                  columns[col] = col;
                  series[col - 1].color = null;
              }
              var view = new google.visualization.DataView(data);
              view.setColumns(columns);
              chart.draw(view, options);
          }
      }
    });
  }
</script>
